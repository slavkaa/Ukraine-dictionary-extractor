<?php

// @acton: php init_step_one.php

require_once('../support/_require_once.php');

// *** //

$author = 'Тарас Григорович Шевченко';
$titles = [
    5 => 'Єретик.txt',
    6 => 'І Архімед, і Галілей.txt',
    7 => 'І багата я.txt',
    8 => 'І виріс я на чужині.txt',
    9 => 'І день іде, і ніч іде.txt',
    10 => 'І досі сниться під горою.txt',
    11 => 'І золотої й дорогої.txt',
    12 => 'І мертвим, і живим,.txt',
    13 => 'І небо невмите, і заспані хвилі.txt',
    14 => 'І станом гнучим, і красою.txt',
    15 => 'І тут, і всюди — скрізь погано.txt',
    16 => 'І широкую долину.txt',
    17 => 'Іван Підкова.txt',
    18 => 'Із-за гаю сонце сходить.txt',
    19 => 'Іржавець.txt',
    20 => 'Ісаія Глава 35.txt',
    21 => 'А нумо знову віршувать.txt',
    22 => 'А. О. Козачковському.txt',
    23 => 'Артист.txt',
    24 => 'Барвінок цвів і зеленів.txt',
    25 => 'Близнята.txt',
    26 => 'Буває, іноді старий.txt',
    27 => 'Бували войни й військовії свари.txt',
    28 => 'В казематі V.txt',
    29 => 'В казематі VІ.txt',
    30 => 'В казематі VІІІ.txt',
    31 => 'В казематі X .txt',
    32 => 'В казематі XІ .txt',
    33 => 'В казематі XІІ.txt',
    34 => 'В казематі І.txt',
    35 => 'В казематі ІV.txt',
    36 => 'В казематі ІX .txt',
    37 => 'В казематі ІІ.txt',
    38 => 'В казематі ІІІ.txt',
    39 => 'В казематі.txt',
    40 => 'В неволі, в самоті немає.txt',
    41 => 'Відьма.txt',
    42 => 'Вітер з гаєм розмовляє.txt',
    43 => 'Варнак .txt',
    44 => 'Варнак.txt',
    45 => 'Великий льох .txt',
    46 => 'Во Іудеї во дні они.txt',
    47 => 'Г. 3. Немає гірше, як в неволі.txt',
    48 => 'Гімн черничий.txt',
    49 => 'Гайдамаки Ґонта в Умані.txt',
    50 => 'Гайдамаки Інтродукція.txt',
    51 => 'Гайдамаки Бенкет у Лисянці.txt',
    52 => 'Гайдамаки Галайда.txt',
    53 => 'Гайдамаки Гупалівщина.txt',
    54 => 'Гайдамаки Епілог.txt',
    55 => 'Гайдамаки Конфедерати.txt',
    56 => 'Гайдамаки Лебедин.txt',
    57 => 'Гайдамаки Панове субскрибенти!.txt',
    58 => 'Гайдамаки Передмова.txt',
    59 => 'Гайдамаки Свято в Чигирині.txt',
    60 => 'Гайдамаки Титар.txt',
    61 => 'Гайдамаки Треті півні.txt',
    62 => 'Гайдамаки Червоний бенкет.txt',
    63 => 'Гайдамаки.txt',
    64 => 'Гамалія (друга редакція).txt',
    65 => 'Гамалія 2.txt',
    66 => 'Гамалія.txt',
    67 => 'Гоголю.txt',
    68 => 'Готово! Парус розпустили.txt',
    69 => 'Дівичії ночі.txt',
    70 => 'Дівча любе, чорнобриве.txt',
    71 => 'Добро, у кого є господа.txt',
    72 => 'Доля.txt',
    73 => 'Думи мої, думи мої,.txt',
    74 => 'Думи мої, думи мої.txt',
    75 => 'Думка 2.txt',
    76 => 'Думка 3.txt',
    77 => 'Думка 4.txt',
    78 => 'Думка.txt',
    79 => 'Дурні та гордії ми люди.txt',
    80 => 'З передсвіта до вечора.txt',
    81 => 'Зійшлись, побрались, поєднались.txt',
    82 => 'За сонцем хмаронька пливе.txt',
    83 => 'За що ми любимо Богдана.txt',
    84 => 'Заворожи мені, волхве.txt',
    85 => 'Заповіт.txt',
    86 => 'Заросли шляхи тернами.txt',
    87 => 'Заступила чорна хмара.txt',
    88 => 'Зацвіла в долині ... 2.txt',
    89 => 'Зацвіла в долині.txt',
    90 => 'Кавказ.txt',
    91 => 'Катерина.txt',
    92 => 'Княгиня.txt',
    93 => 'Княжна.txt',
    94 => 'Колись дурною головою.txt',
    95 => 'Колись-то ще, во время оно.txt',
    96 => 'Коло гаю к чистім полі.txt',
    97 => 'Кума моя і я.txt',
    98 => 'Л. (Поставлю хату і кімнату).txt',
    99 => 'Лічу в неволі дні і ночі (друга редакція).txt',
    100 => 'Лічу в ненолі дні і ночі... 1850-1858.txt',
    101 => 'Ликері.txt',
    103 => 'Мій боже милий, знову лихо!.txt',
    104 => 'Маленькій Мар`яні.txt',
    105 => 'Мандрівка з приємністю та й не без моралі.txt',
    106 => 'Мар`яна-черниця.txt',
    107 => 'Марія.txt',
    108 => 'Марина.txt',
    109 => 'Марку Вовчку.txt',
    110 => 'Меж скалами, неначе злодій.txt',
    111 => 'Мені здається, я не знаю.txt',
    112 => 'Мені тринадцятий минало.txt',
    113 => 'Ми вкупочці колись росли.txt',
    114 => 'Ми восени таки похожі.txt',
    115 => 'Ми заспівали, розійшлись.txt',
    116 => 'Минають дні, минають ночі.txt',
    117 => 'Минули літа молодії.txt',
    118 => 'Мов за подушне, оступили.txt',
    119 => 'Молитва.txt',
    120 => 'Москалева криниця (перша редакція).txt',
    121 => 'Москалева криниця.txt',
    122 => 'Муза.txt',
    123 => 'Музика 2.txt',
    124 => 'Музика.txt',
    125 => 'Н. Маркевичу.txt',
    126 => 'Н.Т (Великомученице кумо! ).txt',
    127 => 'На Великдень, на соломі.txt',
    128 => 'На батька бісового я трачу.txt',
    129 => 'На вічну пам`ять Котляревському.txt',
    130 => 'На вгороді коло броду.txt',
    131 => 'На незабудь Штернбергові.txt',
    132 => 'На улиці невесело.txt',
    133 => 'Над Дніпровою сагою.txt',
    134 => 'Наймичка 2.txt',
    135 => 'Наймичка.txt',
    136 => 'Нащо мені женитися.txt',
    137 => 'Не вернувся із походу.txt',
    138 => 'Не гріє сонце на чужині.txt',
    139 => 'Не для людей, тієї слави.txt',
    140 => 'Не додому вночі йдучи.txt',
    141 => 'Не женися на багатій.txt',
    142 => 'Не завидуй багатому.txt',
    143 => 'Не молилася за мене.txt',
    144 => 'Не нарікаю я на бога.txt',
    145 => 'Не спалося, – а ніч, як море.txt',
    146 => 'Не так тії вороги.txt',
    147 => 'Не тополю високую.txt',
    148 => 'Не хочу я женитися.txt',
    149 => 'Невольник.txt',
    150 => 'Неначе степом чумаки.txt',
    151 => 'Неофіти.txt',
    152 => 'Ну що б, здавалося, слова.txt',
    153 => 'О думи мої! о славо злая!.txt',
    154 => 'О люди! люди небораки!.txt',
    155 => 'Огні горять, музика грає.txt',
    156 => 'Один у другого питаєм.txt',
    157 => 'Ой виострю товариша.txt',
    158 => 'Ой гляну я, подивлюся.txt',
    159 => 'Ой діброво — темний гаю!.txt',
    160 => 'Ой крикнули сірії гуси.txt',
    161 => 'Ой маю, маю я оченята.txt',
    162 => 'Ой пішла я у яр за водою.txt',
    163 => 'Ой по горі роман цвіте.txt',
    164 => 'Ой стрічечка до стрічечки.txt',
    165 => 'Ой сяду я під хатою.txt',
    166 => 'Ой умер старий батько.txt',
    167 => 'Ой я свого чоловіка.txt',
    168 => 'Он не п`ються пива-меди.txt',
    169 => 'Он чого ти почорніло.txt',
    170 => 'Осії глава XІV.txt',
    171 => 'П. С.txt',
    172 => 'Перебендя.txt',
    173 => 'Петрусь.txt',
    174 => 'Плач Ярославни.txt',
    175 => 'По улиці вітер віє.txt',
    176 => 'Подражаніє 11 псалму.txt',
    177 => 'Подражаніє Ієзекіїлю.txt',
    178 => 'Подражаніє Едуарду Сові.txt',
    179 => 'Подражаніє сербському.txt',
    180 => 'Полюбилася я.txt',
    181 => 'Полякам.txt',
    182 => 'Породила мене мати.txt',
    183 => 'Причинна.txt',
    184 => 'Пророк.txt',
    185 => 'Псалми Давидові.txt',
    186 => 'Розрита могила.txt',
    187 => 'Росли укупочці, зросли.txt',
    188 => 'Русалка.txt',
    189 => 'Самому чудно. А де ж дітись.txt',
    190 => 'Саул.txt',
    191 => 'Світе ясний! Світе тихий!.txt',
    192 => 'Сестрі.txt',
    193 => 'Сичі.txt',
    194 => 'Слава.txt',
    195 => 'Сова.txt',
    196 => 'Сон (На панщині пшеницю жала).txt',
    197 => 'Сон 2.txt',
    198 => 'Сон.txt',
    199 => 'Сонце заходить, гори чорніють.txt',
    200 => 'Стоїть в селі Суботові.txt',
    201 => 'Та не дай, господи, нікому.txt',
    202 => 'Така, як ти, колись лілея.txt',
    203 => 'Тарасова ніч (друга редакція).txt',
    204 => 'Тарасова ніч.txt',
    205 => 'Тече вода з-під явора.txt',
    206 => 'Тим неситим очам.txt',
    207 => 'Титарівна-Немирівна.txt',
    208 => 'Титарівна.txt',
    209 => 'То так і я тепер пишу.txt',
    210 => 'Тополя.txt',
    211 => 'Три літа.txt',
    212 => 'Тризна.txt',
    213 => 'Туман, туман долиною.txt',
    214 => 'У бога за дверми лежала сокира.txt',
    215 => 'У нашім раї на землі.txt',
    216 => 'У неділеньку та ранесенько.txt',
    217 => 'У неділеньку у святую.txt',
    218 => 'У неділю не гуляла.txt',
    219 => 'У перетику ходила.txt',
    220 => 'У тієї Катерини.txt',
    221 => 'Умре муж велій в власяниці.txt',
    222 => 'Утоплена.txt',
    223 => 'Утоптала стежечку.txt',
    224 => 'Хіба самому написать.txt',
    225 => 'Холодний яр.txt',
    226 => 'Хоча лежачого й не б`ють.txt',
    227 => 'Хустина.txt',
    228 => 'Царі.txt',
    229 => 'Чернець.txt',
    230 => 'Чи не покинуть нам, небого.txt',
    231 => 'Чи то недоля та неволя.txt',
    232 => 'Чигрине, Чигрине.txt',
    233 => 'Чого мені тяжко, чого мені нудно.txt',
    234 => 'Чума.txt',
    235 => 'Швачка.txt',
    236 => 'Юродивий.txt',
    237 => 'Я не нездужаю, нівроку.txt',
    238 => 'Як маю я журитися.txt',
    239 => 'Якби ви знали, паничі.txt',
    240 => 'Якби з ким сісти хліба з`їсти.txt',
    241 => 'Якби зустрілися ми знову.txt',
    242 => 'Якби мені черевики.txt',
    243 => 'Якби мені, мамо, намисто.txt',
    244 => 'Якби тобі довелося.txt',
    245 => 'Якби-то ти, Богдане п`яний.txt',
    246 => 'Якось-то йдучи уночі.txt',
];

foreach ($titles as $title) {
    echo $title . "\n";
    echo '.';
    $filename = sprintf('../texts/%s/%s', $author, $title);
    $filename = iconv(mb_detect_encoding($filename, mb_detect_order(), true), "cp1251", $filename);

    $text = file_get_contents($filename);

    $text = iconv(mb_detect_encoding($text, mb_detect_order(), true), "UTF-8", $text); // back to cyryllic
    $text = str_replace($pronunciationSings, ' ', $text); // remove pronunciation sings
    $textWords = array_unique(explode(' ', $text)); // remove word dublicates

    $source = new Source($dbh);
    $source->firstOrNew($author, $title);

    foreach ($textWords as $textWord) {
        echo '+';

        $wordRaw = new WordRaw($dbh);
        $wordRaw->firstOrNew($textWord);

        $wrongCharacters = $foreignLettersWithoutI;
        $wrongCharacters = array_merge($wrongCharacters, $numbers);

        if (array_in_string($wrongCharacters, $textWord)) {
            $wordRaw->setProperty('is_not_urk_word', PDO::PARAM_BOOL, true);
        }

        $wordRaw->setProperty('is_need_processing', PDO::PARAM_BOOL, true);

        $wordRawToSource = new WordRawToSource($dbh);
        $wordRawToSource->firstOrNew($source->getId(), $wordRaw->getId());
    }

    echo "\n";
}



